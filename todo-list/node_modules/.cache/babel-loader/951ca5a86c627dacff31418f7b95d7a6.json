{"ast":null,"code":"import _toConsumableArray from\"C:/Users/radum/Desktop/web-apps/todo-list/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"C:/Users/radum/Desktop/web-apps/todo-list/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import React,{useState,useRef,useEffect}from'react';import TodoList from'./TodoList';import{v4}from'uuid';var LOCAL_STORAGE_KEY='todoApp.todos';function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),todos=_useState2[0],setTodos=_useState2[1];var todoNameRef=useRef();useEffect(function(){var storedTodos=JSON.parse(localStorage.getItem(LOCAL_STORAGE_KEY));if(storedTodos)setTodos(storedTodos);},[]);function toggleTodo(id){var newTodos=_toConsumableArray(todos);var todo=newTodos.find(function(todo){return todo.id===id;});todo.completed=!todo.completed;setTodos(newTodos);}useEffect(function(){localStorage.setItem(LOCAL_STORAGE_KEY,JSON.stringify(todos));},[todos]);function handleAddTodo(e){var name=todoNameRef.current.value;if(name==='')return;console.log(name);setTodos(function(prevTodos){return[].concat(_toConsumableArray(prevTodos),[{id:v4(),name:name,completed:false}]);});todoNameRef.current.value=null;}function handleClearTodos(){var newTodos=todos.filter(function(todo){return!todo.completed;});setTodos(newTodos);}return/*#__PURE__*/_jsxs(_Fragment,{children:[todos.map(function(todo){return/*#__PURE__*/_jsx(TodoList,{todoList:todo,toggleTodo:toggleTodo},todo.id);}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",ref:todoNameRef}),/*#__PURE__*/_jsx(\"button\",{onClick:handleAddTodo,children:\"Add to do\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleClearTodos,children:\"Clear completed\"}),/*#__PURE__*/_jsxs(\"div\",{children:[todos.filter(function(todo){return!todo.completed;}).length,\" left to do\"]})]});}export default App;","map":{"version":3,"sources":["C:/Users/radum/Desktop/web-apps/todo-list/src/App.js"],"names":["React","useState","useRef","useEffect","TodoList","v4","LOCAL_STORAGE_KEY","App","todos","setTodos","todoNameRef","storedTodos","JSON","parse","localStorage","getItem","toggleTodo","id","newTodos","todo","find","completed","setItem","stringify","handleAddTodo","e","name","current","value","console","log","prevTodos","handleClearTodos","filter","map","length"],"mappings":"6YAAA,MAAOA,CAAAA,KAAP,EAAeC,QAAf,CAAyBC,MAAzB,CAAiCC,SAAjC,KAAiD,OAAjD,CACA,MAAOC,CAAAA,QAAP,KAAqB,YAArB,CACA,OAAQC,EAAR,KAAiB,MAAjB,CAEA,GAAMC,CAAAA,iBAAiB,CAAC,eAAxB,CAEA,QAASC,CAAAA,GAAT,EAAe,eACWN,QAAQ,CAAC,EAAD,CADnB,wCACNO,KADM,eACCC,QADD,eAEb,GAAMC,CAAAA,WAAW,CAACR,MAAM,EAAxB,CAEAC,SAAS,CAAC,UAAI,CACZ,GAAMQ,CAAAA,WAAW,CAACC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqBT,iBAArB,CAAX,CAAlB,CACA,GAAGK,WAAH,CAAeF,QAAQ,CAACE,WAAD,CAAR,CAChB,CAHQ,CAGN,EAHM,CAAT,CAKA,QAASK,CAAAA,UAAT,CAAoBC,EAApB,CAAuB,CACrB,GAAMC,CAAAA,QAAQ,oBAAKV,KAAL,CAAd,CACA,GAAMW,CAAAA,IAAI,CAACD,QAAQ,CAACE,IAAT,CAAc,SAAAD,IAAI,QAAEA,CAAAA,IAAI,CAACF,EAAL,GAAUA,EAAZ,EAAlB,CAAX,CACAE,IAAI,CAACE,SAAL,CAAe,CAACF,IAAI,CAACE,SAArB,CACAZ,QAAQ,CAACS,QAAD,CAAR,CACD,CAEDf,SAAS,CAAC,UAAI,CACZW,YAAY,CAACQ,OAAb,CAAqBhB,iBAArB,CAAwCM,IAAI,CAACW,SAAL,CAAef,KAAf,CAAxC,EACD,CAFQ,CAEN,CAACA,KAAD,CAFM,CAAT,CAIA,QAASgB,CAAAA,aAAT,CAAuBC,CAAvB,CAAyB,CACvB,GAAMC,CAAAA,IAAI,CAAChB,WAAW,CAACiB,OAAZ,CAAoBC,KAA/B,CACA,GAAGF,IAAI,GAAG,EAAV,CAAa,OACbG,OAAO,CAACC,GAAR,CAAYJ,IAAZ,EACAjB,QAAQ,CAAC,SAAAsB,SAAS,CAAE,CAClB,mCAAWA,SAAX,GAAsB,CAACd,EAAE,CAAEZ,EAAE,EAAP,CAAWqB,IAAI,CAAEA,IAAjB,CAAuBL,SAAS,CAAE,KAAlC,CAAtB,GACD,CAFO,CAAR,CAGAX,WAAW,CAACiB,OAAZ,CAAoBC,KAApB,CAA0B,IAA1B,CACD,CAED,QAASI,CAAAA,gBAAT,EAA2B,CACzB,GAAMd,CAAAA,QAAQ,CAACV,KAAK,CAACyB,MAAN,CAAa,SAAAd,IAAI,QAAE,CAACA,IAAI,CAACE,SAAR,EAAjB,CAAf,CACAZ,QAAQ,CAACS,QAAD,CAAR,CACD,CAED,mBACE,2BACGV,KAAK,CAAC0B,GAAN,CAAU,SAAAf,IAAI,CAAE,CACf,mBAAO,KAAC,QAAD,EAAwB,QAAQ,CAAEA,IAAlC,CAAwC,UAAU,CAAEH,UAApD,EAAeG,IAAI,CAACF,EAApB,CAAP,CACD,CAFA,CADH,cAIE,cAAO,IAAI,CAAC,MAAZ,CAAmB,GAAG,CAAEP,WAAxB,EAJF,cAKE,eAAQ,OAAO,CAAEc,aAAjB,uBALF,cAME,eAAQ,OAAO,CAAEQ,gBAAjB,6BANF,cAOE,uBAAMxB,KAAK,CAACyB,MAAN,CAAa,SAAAd,IAAI,QAAE,CAACA,IAAI,CAACE,SAAR,EAAjB,EAAoCc,MAA1C,iBAPF,GADF,CAWD,CAED,cAAe5B,CAAAA,GAAf","sourcesContent":["import React, {useState, useRef, useEffect} from 'react'\nimport TodoList from './TodoList'\nimport {v4} from 'uuid'\n\nconst LOCAL_STORAGE_KEY='todoApp.todos'\n\nfunction App() {\n  const [todos, setTodos]=useState([])\n  const todoNameRef=useRef()\n\n  useEffect(()=>{\n    const storedTodos=JSON.parse(localStorage.getItem(LOCAL_STORAGE_KEY))\n    if(storedTodos)setTodos(storedTodos)\n  }, [])\n\n  function toggleTodo(id){\n    const newTodos=[...todos]\n    const todo=newTodos.find(todo=>todo.id===id)\n    todo.completed=!todo.completed\n    setTodos(newTodos)\n  }\n\n  useEffect(()=>{\n    localStorage.setItem(LOCAL_STORAGE_KEY, JSON.stringify(todos))\n  }, [todos])\n\n  function handleAddTodo(e){\n    const name=todoNameRef.current.value\n    if(name==='')return\n    console.log(name)\n    setTodos(prevTodos=>{\n      return [...prevTodos, {id: v4(), name: name, completed: false}]\n    })\n    todoNameRef.current.value=null\n  }\n\n  function handleClearTodos(){\n    const newTodos=todos.filter(todo=>!todo.completed)\n    setTodos(newTodos)\n  }\n\n  return (\n    <>\n      {todos.map(todo=>{\n        return <TodoList key={todo.id} todoList={todo} toggleTodo={toggleTodo}/>\n      })}\n      <input type=\"text\" ref={todoNameRef}></input>\n      <button onClick={handleAddTodo}>Add to do</button>\n      <button onClick={handleClearTodos}>Clear completed</button>\n      <div>{todos.filter(todo=>!todo.completed).length} left to do</div>\n    </>\n  )\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}